// Java program to implement 
// a Simple Registration Form 
// using Java Swing 

import javax.swing.*; 
import java.awt.*; 
import java.awt.event.*;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.Socket;
import java.util.ArrayList;
import java.util.Iterator; 

class MyFrame1 
	extends JFrame 
	{ 

	// Components of the Form 
	private Container c; 
	private JLabel title; 
	private JLabel name,unit,enterdata; 
	private JTextField tname,tname1,tunit,tdate,tenterdata; 
	private JLabel email; 
	private JTextField temail;
	private JLabel pass; 
	private JPasswordField tpass;
	private JLabel mno; 
	private JTextField tmno; 
	private JLabel gender; 
	private JRadioButton male; 
	private JRadioButton female; 
	private ButtonGroup gengp; 
	private JLabel dob; 
	private JComboBox date; 
	private JComboBox month; 
	private JComboBox year; 
	private JLabel add; 
	private JTextArea tadd; 
	private JCheckBox term; 
	private JButton refresh,users,cashback; 
	
	private JButton reset; 
	private JTextArea tout; 
	private JLabel res; 
	private JTextArea resadd; 

	

	//socket connection
    static ObjectOutputStream oos;
	static ObjectInputStream ois ;
	static Socket socket ;	
	
	// constructor, to initialize the components 
	// with default values. 
	public MyFrame1() 
	{ 
		
	
		EventQueue.invokeLater(new Runnable() {
			public void run() {
				try {
//					System.out.println("Hiiiii");
					socket = new Socket("127.0.0.1", 11111);
					oos = new ObjectOutputStream(socket.getOutputStream());
					ois = new ObjectInputStream(socket.getInputStream());
					
					oos.writeObject("Admin");
					
				} catch (IOException e1) {
					// TODO Auto-generated catch block
					e1.printStackTrace();
				}
			}
		});
		
		
		
		setTitle("Welcome Admin"); 
		setBounds(300, 90, 900, 600+300); 
		setDefaultCloseOperation(EXIT_ON_CLOSE); 
		setResizable(false); 

	
		setLayout(null); 

		
		users = new JButton("List fo Users"); 
		users.setFont(new Font("Arial", Font.PLAIN, 15)); 
		users.setSize(400, 50); 
		users.setLocation(50, 50); 
//		setunit.addActionListener(new Regi()); 
		add(users); 
//		
//		name = new JLabel("Enter Customer_ID"); 
//		name.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		name.setSize(200, 30); 
//		name.setLocation(50, 30+70); 
//		add(name);
//		name.setVisible(false);
//		
//		tname1 = new JTextField(); 
//		tname1.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		tname1.setSize(90, 30); 
//		tname1.setLocation(150+80, 30+70); 
//		add(tname1);
//		tname1.setVisible(false);
//		
//		unit = new JLabel("Enter Units"); 
//		unit.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		unit.setSize(200, 30); 
//		unit.setLocation(50, 30+70+40); 
//		add(unit);
//		unit.setVisible(false);
//		
//		
//		tunit = new JTextField(); 
//		tunit.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		tunit.setSize(90, 30); 
//		tunit.setLocation(150+80, 30+70+40); 
//		add(tunit); 
//		tunit.setVisible(false);
//		
//		
//		set = new JButton("Set"); 
//		set.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		set.setSize(100, 30); 
//		set.setLocation(50, 90+95+70); 
//		set.addActionListener(new Set()); 
//		add(set);
//		set.setVisible(false);
//		
//		dob = new JLabel("Enter Date"); 
//		dob.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		dob.setSize(100, 20); 
//		dob.setLocation(50, 30+70+40+60); 
//		add(dob);
//		dob.setVisible(false);
//
//		
//		setunit.addActionListener(new java.awt.event.ActionListener() {
//            public void actionPerformed(java.awt.event.ActionEvent evt) {
//            	title.setVisible(false);
//            	tname.setVisible(false);
//            	submit.setVisible(false);
//            	search.setLocation(50, 330+100); 
//            	
//            	whohasnotpayed.setLocation(50, 130+200); 
//            	refresh.setLocation(300, 130+200); 
//            	delete.setLocation(50, 230+200);
//            	search.setLocation(50, 330+200); 
//            	
//            	set.setVisible(true);
//            	tunit.setVisible(true);
//            	unit.setVisible(true);
//            	tname1.setVisible(true);
//            	name.setVisible(true);
//            	
//            	dob.setVisible(true);
//            	date.setVisible(true);
//            	month.setVisible(true);
//            	year.setVisible(true);
//            	
//            	gender.setVisible(false);
//            	male.setVisible(false);
//            	female.setVisible(false);
////            	gengp.setVisible(false);
//            	gender.setVisible(false);
//            	enterdata.setVisible(false);
//            	tenterdata.setVisible(false);
//            	submit1.setVisible(false);
//            	
//            }
//        });
//		
//		
//		
//		whohasnotpayed = new JButton("Who has not payed bill ?"); 
//		whohasnotpayed.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		whohasnotpayed.setSize(220, 50); 
//		whohasnotpayed.setLocation(50, 130); 
//		whohasnotpayed.addActionListener(new whnpby()); 
//		add(whohasnotpayed); 
//		
//		refresh = new JButton("Refresh"); 
//		refresh.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		refresh.setSize(120, 50); 
//		refresh.setLocation(300, 130); 
//		refresh.addActionListener(new java.awt.event.ActionListener() {
//            public void actionPerformed(java.awt.event.ActionEvent evt) {
//            	setVisible(false);
//            	new AdminLogin();
//            	
//            }
//        });
//		add(refresh);
//		
//		
//		delete = new JButton("Delete Customer"); 
//		delete.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		delete.setSize(300, 50); 
//		delete.setLocation(50, 230); 
////		delete.addActionListener(new Regi()); 
//		add(delete);
//		
//		
//		
//		title = new JLabel("Enter ID of customer"); 
//		title.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		title.setSize(200, 30); 
//		title.setLocation(50, 330); 
//		add(title); 
//		title.setVisible(false);
//		
//		tname = new JTextField(); 
//		tname.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		tname.setSize(90, 30); 
//		tname.setLocation(250, 330); 
//		add(tname); 
//		tname.setVisible(false);
//		
//		
//		
//		submit = new JButton("Submit"); 
//		submit.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		submit.setSize(100, 30); 
//		submit.setLocation(50, 375); 
//		submit.addActionListener(new Sub()); 
//		add(submit);
//		submit.setVisible(false);
//		
//		delete.addActionListener(new java.awt.event.ActionListener() {
//            public void actionPerformed(java.awt.event.ActionEvent evt) {
//            	title.setVisible(true);
//            	tname.setVisible(true);
//            	submit.setVisible(true);
//            	search.setLocation(50, 430); 
//            	
//            	whohasnotpayed.setLocation(50, 130);
//            	refresh.setLocation(300, 130); 
//            	delete.setLocation(50, 230);
//            	
//            	
//            	set.setVisible(false);
//            	tunit.setVisible(false);
//            	unit.setVisible(false);
//            	tname1.setVisible(false);
//            	name.setVisible(false);
//            	
//            	dob.setVisible(false);
//            	date.setVisible(false);
//            	month.setVisible(false);
//            	year.setVisible(false);
//            	
//            	gender.setVisible(false);
//            	male.setVisible(false);
//            	female.setVisible(false);
////            	gengp.setVisible(false);
//            	gender.setVisible(false);
//            	enterdata.setVisible(false);
//            	tenterdata.setVisible(false);
//            	submit1.setVisible(false);
//            	
//            }
//        });
//		
//		
//		
//		search = new JButton("Search"); 
//		search.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		search.setSize(300, 50); 
//		search.setLocation(50, 330); 
//		search.addActionListener(new java.awt.event.ActionListener() {
//            public void actionPerformed(java.awt.event.ActionEvent evt) {          	
//            	gender.setVisible(true);
//            	male.setVisible(true);
//            	female.setVisible(true);
////            	gengp.setVisible(false);
//            	gender.setVisible(true);
//            	enterdata.setVisible(true);
//            	tenterdata.setVisible(true);
//            	submit1.setVisible(true);
//            	
//            	set.setVisible(false);
//            	tunit.setVisible(false);
//            	unit.setVisible(false);
//            	tname1.setVisible(false);
//            	name.setVisible(false);
//            	dob.setVisible(false);
//            	date.setVisible(false);
//            	month.setVisible(false);
//            	year.setVisible(false);
//            	
//            	title.setVisible(false);
//            	tname.setVisible(false);
//            	submit.setVisible(false);
//            	search.setLocation(50, 330+100); 
//            	
//            	search.setLocation(50, 330);
//            	delete.setLocation(50, 230);
//            	whohasnotpayed.setLocation(50, 130);
//            	refresh.setLocation(300, 130);
//            	
//            }
//        }); 
//		add(search);
//		
//		
//		
//		
//		gender = new JLabel("Search By -"); 
//		gender.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		gender.setSize(100, 20); 
//		gender.setLocation(50, 420); 
//		add(gender); 
//		gender.setVisible(false);
//		
//		
//		male = new JRadioButton("ID"); 
//		male.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		male.setSelected(true); 
//		male.setSize(50, 20); 
//		male.setLocation(100+50, 420); 
//		add(male); 
//		male.setVisible(false);
//		
//		female = new JRadioButton("Email_ID"); 
//		female.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		female.setSelected(false); 
//		female.setSize(150, 20); 
//		female.setLocation(100+100+50,420); 
//		add(female); 
//		female.setVisible(false);
//		
//		gengp = new ButtonGroup(); 
//		gengp.add(male); 
//		gengp.add(female); 
////		gengp.setVisible(false);
//		
//		enterdata = new JLabel("Enter Data as selected"); 
//		enterdata.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		enterdata.setSize(190, 30); 
//		enterdata.setLocation(50, 470); 
//		add(enterdata);
//		enterdata.setVisible(false);
//		
//		tenterdata = new JTextField(); 
//		tenterdata.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		tenterdata.setSize(200, 30); 
//		tenterdata.setLocation(240, 470); 
//		add(tenterdata); 
//		tenterdata.setVisible(false);
//		
//		submit1 = new JButton("Submit"); 
//		submit1.setFont(new Font("Arial", Font.PLAIN, 15)); 
//		submit1.setSize(100, 30); 
//		submit1.setLocation(50, 520); 
//		submit1.addActionListener(new search()); 
//		add(submit1);
//		submit1.setVisible(false);
		
		tout = new JTextArea(); 
		tout.setFont(new Font("Arial", Font.PLAIN, 15)); 
		tout.setSize(620, 400+100); 
		tout.setLocation(120, 200); 
		tout.setLineWrap(true); 
		tout.setEditable(false); 
		add(tout); 
//		
		
		refresh = new JButton("Refresh"); 
		refresh.setFont(new Font("Arial", Font.PLAIN, 15)); 
		refresh.setSize(120, 50); 
		refresh.setLocation(370, 720); 
		refresh.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
            	setVisible(false);
            	new AdminLogin();
            	
            }
        });
		add(refresh);
		
		
		setVisible(true); 
	} 

	// method actionPerformed() 
	// to get the action performed 
	// by the user and act accordingly 
	 public class Regi implements ActionListener{
			public void actionPerformed(ActionEvent ev) {
				try {
					oos.writeObject("setunit");
					
					
					
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		}
	 
	 public class Sub implements ActionListener{
			public void actionPerformed(ActionEvent ev) {
				try {
					oos.writeObject("delete");
					
					String id=tname.getText();
					oos.writeObject(id);
					
					String reply=(String)ois.readObject();
					
					if(!reply.equals("-1")){
						JOptionPane.showMessageDialog(null, "Customer deleted succesfully");
						
					}else {
						JOptionPane.showMessageDialog(null, "Oops!!!\nCustomer might be deleted alredy!!");
					}
					setVisible(false);
					new AdminLogin();
				
					
				} catch (IOException | ClassNotFoundException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		}
	 public class Set implements ActionListener{
			public void actionPerformed(ActionEvent ev) {
				try {
					oos.writeObject("setunit");
					
					String id=tname1.getText();
					String unit=tunit.getText();
					String data2=(String)date.getSelectedItem() + "/" + (String)month.getSelectedItem() 
					+ "/" + (String)year.getSelectedItem() ; 
					oos.writeObject(id);
					oos.writeObject(unit);
					oos.writeObject(data2);
					
					
					String reply=(String)ois.readObject();
					
					System.out.println(reply);
					if(!reply.equals("-1")){
						JOptionPane.showMessageDialog(null, "Bill receipt generated with Bill id="+reply);
						
						
					}else {
						JOptionPane.showMessageDialog(null, "Oops!!!\nSomething went wrong!!");
					}
					setVisible(false);
					new AdminLogin();
				
					
				} catch (IOException | ClassNotFoundException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		}
	 public class whnpby implements ActionListener{
			public void actionPerformed(ActionEvent ev) {
				try {
					oos.writeObject("whnpby");
					String settext="";
					ArrayList<String> arr=new ArrayList<String>();
					
					arr=(ArrayList)ois.readObject();
//					System.out.println(arr.size());
					if(arr.size()==0) {
						JOptionPane.showMessageDialog(null, "Everyone had payed bill Successfully!!");
					}else {
						Iterator it=arr.iterator();
						while(it.hasNext()){
							settext+=it.next()+"\n";;
						}
						tout.setText(settext);
					}
					
					JOptionPane.showMessageDialog(null, "Please do refresh before doing next task!!");
				} catch (IOException | ClassNotFoundException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		}
	 public class search implements ActionListener{
			public void actionPerformed(ActionEvent ev) {
				try {
					String reply;
					
					oos.writeObject("search");
					
					if(male.isSelected()) {
						oos.writeObject("ID");
						
						String id=tenterdata.getText();
						oos.writeObject(id);
						
						 reply=(String)ois.readObject();
						
						
						
					}else {
						oos.writeObject("Email_ID");
						
						String id=tenterdata.getText();
						oos.writeObject(id);
						
						 reply=(String)ois.readObject();
						
						
						
					}
					
					if(!reply.equals("-1")) {
						tout.setText(reply);
					}else {
						JOptionPane.showMessageDialog(null, "Please enter valid input!!");
					}
					JOptionPane.showMessageDialog(null, "Please do refresh before doing next task!!");
					
					
				} catch (IOException | ClassNotFoundException  e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		}
	 
} 

// Driver Code 
public class AdminLogin extends Thread{ 
	public static String id;
	AdminLogin(){
		new MyFrame1(); 		
	}
	public static void main(String[] args) throws Exception 
	{ 
		new AdminLogin();
	} 
	
} 
